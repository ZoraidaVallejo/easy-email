{{! ================================================================================================================= }}
{{! W I D G E T   -   A D V E R T I S E M E N T                                                                       }}
{{! ================================================================================================================= }}

{{!
// TODO: Fix anotations.
}}

{{!
 * @param {Object}          widgetConfig
 * @param {string}          widgetConfig.link
 * @param {Object}          widgetConfig.utm
 * @param {Object}          widgetConfig.logo
 * @param {string}          widgetConfig.logo.name
 * @param {string}          widgetConfig.logo.color
 * @param {string}          widgetConfig.title
 * @param {number}          widgetConfig.titleResponsiveSize
 * @param {string}          widgetConfig.image
 * @param {string}          widgetConfig.imageAlt
 * @param {Object}          widgetConfig.background
 * @param {string}          widgetConfig.background.image
 * @param {string}          widgetConfig.background.bgColor
 * @param {number}          widgetConfig.background.width
 * @param {number}          widgetConfig.background.height
 * @param {string}          widgetConfig.background.cssSize
 * @param {Object[]}        widgetConfig.contentOrder
 * @param {string}          widgetConfig.contentOrder[].type
 * @param {string[]|Object} widgetConfig.contentOrder[].config
 * @param {string}          widgetClass
}}

{{assign "adLink" (concat widgetConfig.link (utmVariables widgetConfig.utm))}}
{{assign "adClasses" (classList "widget" "w-advertisement" widgetClass "set-max-width")}}

{{! ================================================================================================================= }}

{{#table class=(classList "widget" "w-advertisement" widgetClass "set-max-width")}}

  {{#and widgetConfig.background widgetConfig.background.image}}
    <tr>
      {{>ui-background backgroundBehavior="cell" backgroundStart=true
        bgImage=widgetConfig.background.image
        bgColor=widgetConfig.background.bgColor
        bgWidth=widgetConfig.background.width
        bgHeight=widgetConfig.background.height
        bgSize=widgetConfig.background.cssSize
      }}
        <table {{{tableAttr}}}>
  {{/and}}

  {{#if widgetConfig.logo}}
    <tr>
      {{!
      // TODO: Add modifier classes base on which logo is seleceted.
      }}
      <td class="justia-logo" responsive="mobile-padding-horizontal-sides">
        <a href="{{{@root.adLink}}}" target="_blank">
          {{>img
            src=(get (concat (camelcase widgetConfig.logo.name) ".path." widgetConfig.logo.color) logos)
            alt=(get (concat (camelcase widgetConfig.logo.name) ".alt") logos)
          }}
        </a>
      </td>
    </tr>
  {{/if}}

  {{#if widgetConfig.title}}
    <tr>
      <td class="title" responsive="mobile-padding-20-horizontal-sides mobile-padding-20-top">
          <h1>{{{widgetConfig.title}}}</h1>
      </td>
    </tr>
  {{/if}}

  {{#if widgetConfig.image}}
    <tr>
      <td class="image">
        <a href="{{{@root.adLink}}}" target="_blank">
          {{>img
            src=widgetConfig.image
            alt=(default widgetConfig.title widgetConfig.imageAlt)
          }}
        </a>
      </td>
    </tr>
  {{/if}}

  {{#if widgetConfig.contentOrder}}
    {{#forEach widgetConfig.contentOrder}}

      {{#compare this.type "===" "image-banner"}}
        <tr>
          <td class="content -image" responsive="mobile-padding-20-horizontal-sides mobile-padding-20-bottom">
            {{#forIn this.config}}
              {{#compare @key "===" "image"}}
                <a href="{{{../../widgetConfig.link}}}{{{ utmVariables ../../widgetConfig.utm}}}" target="_blank">
                  {{>img
                    src=../config.image
                    alt=(default ../../widgetConfig.title ../../widgetConfig.imageAlt)
                    responsive="mobile-align-center"
                  }}
                </a>
              {{/compare}}
            {{/forIn}}
          </td>
        </tr>
      {{/compare}}

      {{#compare this.type "===" "custom-banner"}}
        <tr>
          <td class="content -image-description -idx-{{index}}{{#if isFirst}} -first{{/if}}{{#if isLast}} -last{{/if}}" responsive="mobile-no-padding-horizontal-sides mobile-padding-20-bottom">
            {{#table class=(classList "-inner-banner" widgetClass "set-max-width")}}
              <tr>
                <td>
                  <div class="-image" responsive="mobile-align-center">
                    <a href="{{{../../widgetConfig.link}}}{{{ utmVariables ../../widgetConfig.utm}}}" target="_blank">
                      {{>img
                        src=(concat config.color "-large-image.jpg")
                        alt=(default ../../widgetConfig.title ../../widgetConfig.imageAlt)
                        responsive="mobile-align-center"
                      }}
                    </a>
                  </div>
                </td>
                <td>
                  <div class="-description" responsive="mobile-no-padding-horizontal-sides mobile-fz-18">
                    {{>img
                      src=(concat config.color "-banner-text-01.jpg")
                      alt="You Were Seen"
                      responsive=config.responsiveImgText
                    }}

                    {{#each config.description}}
                      <p responsive="mobile-fz-18">{{{this}}}</p>
                    {{/each}}

                    {{>img
                      src=(concat config.color "-banner-text-02.jpg")
                      alt="Than Competitors"
                      responsive="mobile-align-center"
                    }}
                  </div>
                </td>
              </tr>
            {{/table}}
          </td>
        </tr>
      {{/compare}}

      {{#compare this.type "===" "list-description"}}
        <tr>
          <td class="content -list-description -idx-{{index}}{{#if isFirst}} -first{{/if}}{{#if isLast}} -last{{/if}}" responsive="{{config.responsive}} mobile-padding-20-horizontal-sides mobile-padding-20-top">
            {{#table class=(classList "-inner-list-description" widgetClass "set-max-width")}}
              <tr>
                {{#forIn this.config}}
                  {{#compare @key "===" "text"}}
                    <td class="-list-wrapper" responsive="mobile-align-top mobile-no-padding-horizontal-sides mobile-no-float">
                      <div class="content-side -list" responsive="mobile-align-top mobile-no-padding-horizontal-sides mobile-no-float">
                        {{#each ../config.text}}
                          <p responsive="">{{{this}}}</p>
                        {{/each}}
                      </div>
                    </td>
                  {{/compare}}

                  {{#compare @key "===" "description"}}
                    <td class="content-side -description" responsive="mobile-no-padding mobile-reset-max-width">
                      <div>
                        {{#each ../config.description}}
                          <p responsive="">{{{this}}}</p>
                        {{/each}}
                      </div>
                    </td>
                  {{/compare}}
                {{/forIn}}
              </tr>
            {{/table}}
          </td>
        </tr>
      {{/compare}}

      {{#compare this.type "===" "image-description"}}
        <tr>
          <td class="content -image-description -idx-{{index}}{{#if isFirst}} -first{{/if}}{{#if isLast}} -last{{/if}}" responsive="{{config.responsive}} mobile-padding-horizontal-sides mobile-padding-20-bottom">
            {{#table class=(classList "-inner-image-description" widgetClass "set-max-width")}}
              <tr>
                {{#forIn this.config}}
                  {{#compare @key "===" "image"}}
                    <td responsive="mobile-align-center mobile-no-padding-horizontal-sides mobile-no-float">
                      <div class="content-side -image" responsive="mobile-align-center mobile-no-padding-horizontal-sides mobile-no-float">
                        <a href="{{{../../widgetConfig.link}}}{{{ utmVariables ../../widgetConfig.utm}}}" target="_blank">
                          {{>img
                            src=../config.image
                            alt=(default ../../widgetConfig.title ../../widgetConfig.imageAlt)
                            responsive="mobile-align-center"
                          }}
                        </a>
                      </div>
                    </td>
                  {{/compare}}

                  {{#compare @key "===" "description"}}
                    <td class="content-side -description" responsive="mobile-no-padding mobile-reset-max-width">
                      <div>
                        {{#each ../config.description}}
                          <p responsive="">{{{this}}}</p>
                        {{/each}}
                      </div>
                    </td>
                  {{/compare}}
                {{/forIn}}
              </tr>
            {{/table}}
          </td>
        </tr>
      {{/compare}}

      {{#compare this.type "===" "description"}}
        <tr>
          <td class="content -description -idx-{{index}}{{#if isFirst}} -first{{/if}}{{#if isLast}} -last{{/if}}" responsive="mobile-padding-20-horizontal-sides mobile-padding-20-bottom mobile-padding-30-top">
            {{#each this.config}}
              {{{this}}}
            {{/each}}
          </td>
        </tr>
      {{/compare}}

      {{#compare this.type "===" "button"}}
        <tr>
          <td class="content -button -idx-{{index}}{{#if isFirst}} -first{{/if}}{{#if isLast}} -last{{/if}}" responsive="mobile-padding-horizontal-sides">
            {{#uiButton
              href=(concat ../widgetConfig.link (utmVariables ../widgetConfig.utm))
              presetStyle=this.config.style
              width=this.config.width
              height=this.config.height
              borderColor=this.config.borderColor
              backgroundColor=this.config.backgroundColor
              fontColor=this.config.fontColor
              fontStyle=this.config.fontStyle
              fontWeight=this.config.fontWeight
              fontSize=this.config.fontSize
              responsive=this.config.responsive
            }}
              {{{this.config.text}}}
            {{/uiButton}}
          </td>
        </tr>
      {{/compare}}
    {{/forEach}}
  {{/if}}

  {{#and widgetConfig.background widgetConfig.background.image}}
      </table>
    {{>ui-background backgroundBehavior="cell" backgroundEnd=true}}
  </tr>
  {{/and}}
{{/table}}
